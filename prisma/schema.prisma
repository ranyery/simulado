// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

enum EUserRole {
  USER
  TEACHER
  ADMIN
}

enum EUserStatus {
  ACTIVE
  PENDING_CONFIRMATION
  SUSPENDED
  BANNED
  CLOSED
}

// npx prisma migrate dev --name create-users => 24/09/2023 08:21:45
model User {
  id            String        @id @default(uuid())
  email         String        @unique
  password      String

  role          EUserRole     @default(USER)
  permissions   String        @default("[]")  // ! Json => Por causa do cockroachdb
  status        EUserStatus   @default(PENDING_CONFIRMATION)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @default(now())

  @@map("users")
}

// npx prisma migrate dev --name create-subjects => 25/09/2023 19:08:21
model Subject {
  id            String    @id @default(uuid())
  name          String
  description   String?

  @@map("subjects")
}

// npx prisma migrate dev --name create-topics => 25/09/2023 22:56:34
model Topic {
  id            String    @id @default(uuid())
  name          String
  description   String?
  subjectId     String

  @@map("topics")
}

enum EQuestionType {
  MULTIPLE_CHOICE
  TRUE_OR_FALSE
  FILL_IN_THE_BLANK
}

enum EQuestionDifficultyLevel {
  EASY
  MEDIUM
  HARD
}

enum EQuestionStatus {
  ACTIVE
  PENDING_REVIEW
  ARCHIVED
}

// npx prisma migrate dev --name create-questions => 26/09/2023 00:05:55
model Question {
  id              String                    @id @default(uuid())
  statement       String
  answerOptions   String                    @default("[]")  // ! Json[] => Por causa do cockroachdb
  explanation     String?
  type            EQuestionType             @default(MULTIPLE_CHOICE)
  source          String                    // ! Json => Por causa do cockroachdb => JÃ¡ pode ser atualizado
  difficultyLevel EQuestionDifficultyLevel  @default(MEDIUM)
  subjectId       String
  relatedTopicIds String[]                  @default([])
  status          EQuestionStatus           @default(PENDING_REVIEW)
  createdAt       DateTime                  @default(now())
  updatedAt       DateTime                  @default(now())

  @@map("questions")
}

// npx prisma studio
